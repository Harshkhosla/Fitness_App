# Static asset runtime only (no Node build step)
FROM nginx:1.27-alpine

ARG BUILD_DIR=dist   # change to build if CRA
ENV BUILD_DIR=${BUILD_DIR}

# Copy SPA assets
COPY ${BUILD_DIR}/ /usr/share/nginx/html/

# Nginx config with SPA fallback
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 3200
HEALTHCHECK --interval=30s --timeout=3s CMD wget -qO- http://localhost:3200/ || exit 1
CMD ["nginx","-g","daemon off;"]